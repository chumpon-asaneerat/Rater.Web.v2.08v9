"use strict";(function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)})(function(t){(function(t){function e(t,e,i,s){return{x:s.cosB*t-s.sinB*i,y:-s.sinA*s.sinB*t+s.cosA*e-s.cosB*s.sinA*i,z:s.cosA*s.sinB*t+s.sinA*e+s.cosA*s.cosB*i}}function i(t,e,i){var s=i>0&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1;return{x:t.x*s,y:t.y*s}}var s=t.deg2rad,o=t.pick;t.perspective=function(a,r,n){var l=r.options.chart.options3d,h=!!n&&r.inverted,c={x:r.plotWidth/2,y:r.plotHeight/2,z:l.depth/2,vd:o(l.depth,1)*o(l.viewDistance,0)},p=r.scale3d||1,x=s*l.beta*(h?-1:1),d=s*l.alpha*(h?-1:1),y={cosA:Math.cos(d),cosB:Math.cos(-x),sinA:Math.sin(d),sinB:Math.sin(-x)};return n||(c.x+=r.plotLeft,c.y+=r.plotTop),t.map(a,function(t){var s=e((h?t.y:t.x)-c.x,(h?t.x:t.y)-c.y,(t.z||0)-c.z,y),o=i(s,c,c.vd);return o.x=o.x*p+c.x,o.y=o.y*p+c.y,o.z=s.z*p+c.z,{x:h?o.y:o.x,y:h?o.x:o.y,z:o.z}})},t.pointCameraDistance=function(t,e){var i=e.options.chart.options3d,s={x:e.plotWidth/2,y:e.plotHeight/2,z:o(i.depth,1)*o(i.viewDistance,0)+i.depth},a=Math.sqrt(Math.pow(s.x-t.plotX,2)+Math.pow(s.y-t.plotY,2)+Math.pow(s.z-t.plotZ,2));return a},t.shapeArea=function(t){var e,i,s=0;for(e=0;e<t.length;e++)i=(e+1)%t.length,s+=t[e].x*t[i].y-t[i].x*t[e].y;return s/2},t.shapeArea3d=function(e,i,s){return t.shapeArea(t.perspective(e,i,s))}})(t),function(t){function e(t,i,s,o,a,r,n,l){var h=[],c=r-a;return r>a&&r-a>Math.PI/2+1e-4?(h=h.concat(e(t,i,s,o,a,a+Math.PI/2,n,l)),h=h.concat(e(t,i,s,o,a+Math.PI/2,r,n,l))):r<a&&a-r>Math.PI/2+1e-4?(h=h.concat(e(t,i,s,o,a,a-Math.PI/2,n,l)),h=h.concat(e(t,i,s,o,a-Math.PI/2,r,n,l))):["C",t+s*Math.cos(a)-s*g*c*Math.sin(a)+n,i+o*Math.sin(a)+o*g*c*Math.cos(a)+l,t+s*Math.cos(r)+s*g*c*Math.sin(r)+n,i+o*Math.sin(r)-o*g*c*Math.cos(r)+l,t+s*Math.cos(r)+n,i+o*Math.sin(r)+l]}var i=Math.cos,s=Math.PI,o=Math.sin,a=t.animObject,r=t.charts,n=t.color,l=t.defined,h=t.deg2rad,c=t.each,p=t.extend,x=t.inArray,d=t.map,y=t.merge,f=t.perspective,z=t.pick,u=t.SVGElement,b=t.SVGRenderer,v=t.wrap,g=4*(Math.sqrt(2)-1)/3/(s/2);v(b.prototype,"init",function(t){t.apply(this,[].slice.call(arguments,1)),c([{name:"darker",slope:.6},{name:"brighter",slope:1.4}],function(t){this.definition({tagName:"filter",id:"highcharts-"+t.name,children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",type:"linear",slope:t.slope},{tagName:"feFuncG",type:"linear",slope:t.slope},{tagName:"feFuncB",type:"linear",slope:t.slope}]}]})},this)}),b.prototype.toLinePath=function(t,e){var i=[];return c(t,function(t){i.push("L",t.x,t.y)}),t.length&&(i[0]="M",e&&i.push("Z")),i},b.prototype.toLineSegments=function(t){var e=[],i=!0;return c(t,function(t){e.push(i?"M":"L",t.x,t.y),i=!i}),e},b.prototype.face3d=function(e){var i=this,s=this.createElement("path");return s.vertexes=[],s.insidePlotArea=!1,s.enabled=!0,v(s,"attr",function(e,s){if("object"==typeof s&&(l(s.enabled)||l(s.vertexes)||l(s.insidePlotArea))){this.enabled=z(s.enabled,this.enabled),this.vertexes=z(s.vertexes,this.vertexes),this.insidePlotArea=z(s.insidePlotArea,this.insidePlotArea),delete s.enabled,delete s.vertexes,delete s.insidePlotArea;var o=r[i.chartIndex],a=f(this.vertexes,o,this.insidePlotArea),n=i.toLinePath(a,!0),h=t.shapeArea(a),c=this.enabled&&h>0?"visible":"hidden";s.d=n,s.visibility=c}return e.apply(this,[].slice.call(arguments,1))}),v(s,"animate",function(e,s){if("object"==typeof s&&(l(s.enabled)||l(s.vertexes)||l(s.insidePlotArea))){this.enabled=z(s.enabled,this.enabled),this.vertexes=z(s.vertexes,this.vertexes),this.insidePlotArea=z(s.insidePlotArea,this.insidePlotArea),delete s.enabled,delete s.vertexes,delete s.insidePlotArea;var o=r[i.chartIndex],a=f(this.vertexes,o,this.insidePlotArea),n=i.toLinePath(a,!0),h=t.shapeArea(a),c=this.enabled&&h>0?"visible":"hidden";s.d=n,this.attr("visibility",c)}return e.apply(this,[].slice.call(arguments,1))}),s.attr(e)},b.prototype.polyhedron=function(t){var e=this,i=this.g(),s=i.destroy;return i.faces=[],i.destroy=function(){for(var t=0;t<i.faces.length;t++)i.faces[t].destroy();return s.call(this)},v(i,"attr",function(t,s,o,a,r){if("object"==typeof s&&l(s.faces)){for(;i.faces.length>s.faces.length;)i.faces.pop().destroy();for(;i.faces.length<s.faces.length;)i.faces.push(e.face3d().add(i));for(var n=0;n<s.faces.length;n++)i.faces[n].attr(s.faces[n],null,a,r);delete s.faces}return t.apply(this,[].slice.call(arguments,1))}),v(i,"animate",function(t,s,o,a){if(s&&s.faces){for(;i.faces.length>s.faces.length;)i.faces.pop().destroy();for(;i.faces.length<s.faces.length;)i.faces.push(e.face3d().add(i));for(var r=0;r<s.faces.length;r++)i.faces[r].animate(s.faces[r],o,a);delete s.faces}return t.apply(this,[].slice.call(arguments,1))}),i.attr(t)},b.prototype.cuboid=function(t){var e=this.g(),i=e.destroy,s=this.cuboidPath(t);return e.front=this.path(s[0]).attr({class:"highcharts-3d-front"}).add(e),e.top=this.path(s[1]).attr({class:"highcharts-3d-top"}).add(e),e.side=this.path(s[2]).attr({class:"highcharts-3d-side"}).add(e),e.fillSetter=function(t){return this.front.attr({fill:t}),this.top.attr({fill:n(t).brighten(.1).get()}),this.side.attr({fill:n(t).brighten(-.1).get()}),this.color=t,e.fill=t,this},e.opacitySetter=function(t){return this.front.attr({opacity:t}),this.top.attr({opacity:t}),this.side.attr({opacity:t}),this},e.attr=function(t,e,i,s){if("string"==typeof t&&"undefined"!=typeof e){var o=t;t={},t[o]=e}if(!t.shapeArgs&&!l(t.x))return u.prototype.attr.call(this,t,void 0,i,s);var a=t.shapeArgs||t,r=this.renderer.cuboidPath(a);return this.front.attr({d:r[0]}),this.top.attr({d:r[1]}),this.side.attr({d:r[2]}),this},e.animate=function(t,e,i){if(l(t.x)&&l(t.y)){var s=this.renderer.cuboidPath(t);this.front.animate({d:s[0]},e,i),this.top.animate({d:s[1]},e,i),this.side.animate({d:s[2]},e,i),this.attr({zIndex:-s[3]})}else t.opacity?(this.front.animate(t,e,i),this.top.animate(t,e,i),this.side.animate(t,e,i)):u.prototype.animate.call(this,t,e,i);return this},e.destroy=function(){return this.front.destroy(),this.top.destroy(),this.side.destroy(),i.call(this)},e.attr({zIndex:-s[3]}),e},t.SVGRenderer.prototype.cuboidPath=function(e){function i(t){return X[t]}var s,o,a,n,l,h,c,p,x,y,z,u,b,v=e.x,g=e.y,m=e.z,M=e.height,A=e.width,P=e.depth,k=r[this.chartIndex],S=k.options.chart.options3d,L=S.alpha,I=1e4,w=10,D=100,Y=0,X=[{x:v,y:g,z:m},{x:v+A,y:g,z:m},{x:v+A,y:g+M,z:m},{x:v,y:g+M,z:m},{x:v,y:g+M,z:m+P},{x:v+A,y:g+M,z:m+P},{x:v+A,y:g,z:m+P},{x:v,y:g,z:m+P}];X=f(X,k,e.insidePlotArea);var Z=function(e,s){var o=[[],-1];return e=d(e,i),s=d(s,i),t.shapeArea(e)<0?o=[e,0]:t.shapeArea(s)<0&&(o=[s,1]),o};return s=[3,2,1,0],o=[7,6,5,4],c=Z(s,o),p=c[0],z=c[1],a=[1,6,7,0],n=[4,5,2,3],c=Z(a,n),x=c[0],u=c[1],h=[1,2,5,6],l=[0,7,4,3],c=Z(h,l),y=c[0],b=c[1],1===b?Y+=I*(1e3-v):b||(Y+=I*v),Y+=w*(!u||L>=0&&L<=180||L<360&&L>357.5?k.plotHeight-g:10+g),1===z?Y+=D*m:z||(Y+=D*(1e3-m)),Y=-Math.round(Y),[this.toLinePath(p,!0),this.toLinePath(x,!0),this.toLinePath(y,!0),Y]},t.SVGRenderer.prototype.arc3d=function(t){function e(t){var e=!1,i={};t=y(t);for(var s in t)x(s,o)!==-1&&(i[s]=t[s],delete t[s],e=!0);return!!e&&i}var i=this.g(),s=i.renderer,o=["x","y","r","innerR","start","end"];return t=y(t),t.alpha*=h,t.beta*=h,i.top=s.path(),i.side1=s.path(),i.side2=s.path(),i.inn=s.path(),i.out=s.path(),i.onAdd=function(){var t=i.parentGroup,e=i.attr("class");i.top.add(i),c(["out","inn","side1","side2"],function(s){i[s].attr({class:e+" highcharts-3d-side"}).add(t)})},c(["addClass","removeClass"],function(t){i[t]=function(){var e=arguments;c(["top","out","inn","side1","side2"],function(s){i[s][t].apply(i[s],e)})}}),i.setPaths=function(t){var e=i.renderer.arc3dPath(t),s=100*e.zTop;i.attribs=t,i.top.attr({d:e.top,zIndex:e.zTop}),i.inn.attr({d:e.inn,zIndex:e.zInn}),i.out.attr({d:e.out,zIndex:e.zOut}),i.side1.attr({d:e.side1,zIndex:e.zSide1}),i.side2.attr({d:e.side2,zIndex:e.zSide2}),i.zIndex=s,i.attr({zIndex:s}),t.center&&(i.top.setRadialReference(t.center),delete t.center)},i.setPaths(t),i.fillSetter=function(t){var e=n(t).brighten(-.1).get();return this.fill=t,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:t}),this},c(["opacity","translateX","translateY","visibility"],function(t){i[t+"Setter"]=function(t,e){i[e]=t,c(["out","inn","side1","side2","top"],function(s){i[s].attr(e,t)})}}),v(i,"attr",function(t,s){var o;return"object"==typeof s&&(o=e(s),o&&(p(i.attribs,o),i.setPaths(i.attribs))),t.apply(this,[].slice.call(arguments,1))}),v(i,"animate",function(t,s,o,r){var n,l,h,c=this.attribs;return delete s.center,delete s.z,delete s.depth,delete s.alpha,delete s.beta,h=a(z(o,this.renderer.globalAnimation)),h.duration&&(n=e(s),s.dummy=i.dummy++,n&&(l=n,h.step=function(t,e){function i(t){return c[t]+(z(l[t],c[t])-c[t])*e.pos}"dummy"===e.prop&&e.elem.setPaths(y(c,{x:i("x"),y:i("y"),r:i("r"),innerR:i("innerR"),start:i("start"),end:i("end")}))}),o=h),t.call(this,s,o,r)}),i.dummy=0,i.destroy=function(){this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),u.prototype.destroy.call(this)},i.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},i.show=function(){this.top.show(),this.out.show(),this.inn.show(),this.side1.show(),this.side2.show()},i},b.prototype.arc3dPath=function(t){function a(t){return t%=2*Math.PI,t>Math.PI&&(t=2*Math.PI-t),t}var r=t.x,n=t.y,l=t.start,h=t.end-1e-5,c=t.r,p=t.innerR,x=t.depth,d=t.alpha,y=t.beta,f=Math.cos(l),z=Math.sin(l),u=Math.cos(h),b=Math.sin(h),v=c*Math.cos(y),g=c*Math.cos(d),m=p*Math.cos(y),M=p*Math.cos(d),A=x*Math.sin(y),P=x*Math.sin(d),k=["M",r+v*f,n+g*z];k=k.concat(e(r,n,v,g,l,h,0,0)),k=k.concat(["L",r+m*u,n+M*b]),k=k.concat(e(r,n,m,M,h,l,0,0)),k=k.concat(["Z"]);var S=y>0?Math.PI/2:0,L=d>0?0:Math.PI/2,I=l>-S?l:h>-S?-S:l,w=h<s-L?h:l<s-L?s-L:h,D=2*s-L,Y=["M",r+v*i(I),n+g*o(I)];Y=Y.concat(e(r,n,v,g,I,w,0,0)),h>D&&l<D?(Y=Y.concat(["L",r+v*i(w)+A,n+g*o(w)+P]),Y=Y.concat(e(r,n,v,g,w,D,A,P)),Y=Y.concat(["L",r+v*i(D),n+g*o(D)]),Y=Y.concat(e(r,n,v,g,D,h,0,0)),Y=Y.concat(["L",r+v*i(h)+A,n+g*o(h)+P]),Y=Y.concat(e(r,n,v,g,h,D,A,P)),Y=Y.concat(["L",r+v*i(D),n+g*o(D)]),Y=Y.concat(e(r,n,v,g,D,w,0,0))):h>s-L&&l<s-L&&(Y=Y.concat(["L",r+v*Math.cos(w)+A,n+g*Math.sin(w)+P]),Y=Y.concat(e(r,n,v,g,w,h,A,P)),Y=Y.concat(["L",r+v*Math.cos(h),n+g*Math.sin(h)]),Y=Y.concat(e(r,n,v,g,h,w,0,0))),Y=Y.concat(["L",r+v*Math.cos(w)+A,n+g*Math.sin(w)+P]),Y=Y.concat(e(r,n,v,g,w,I,A,P)),Y=Y.concat(["Z"]);var X=["M",r+m*f,n+M*z];X=X.concat(e(r,n,m,M,l,h,0,0)),X=X.concat(["L",r+m*Math.cos(h)+A,n+M*Math.sin(h)+P]),X=X.concat(e(r,n,m,M,h,l,A,P)),X=X.concat(["Z"]);var Z=["M",r+v*f,n+g*z,"L",r+v*f+A,n+g*z+P,"L",r+m*f+A,n+M*z+P,"L",r+m*f,n+M*z,"Z"],T=["M",r+v*u,n+g*b,"L",r+v*u+A,n+g*b+P,"L",r+m*u+A,n+M*b+P,"L",r+m*u,n+M*b,"Z"],F=Math.atan2(P,-A),G=Math.abs(h+F),C=Math.abs(l+F),B=Math.abs((l+h)/2+F);G=a(G),C=a(C),B=a(B);var W=1e5,N=B*W,O=C*W,R=G*W;return{top:k,zTop:Math.PI*W+1,out:Y,zOut:Math.max(N,O,R),inn:X,zInn:Math.max(N,O,R),side1:Z,zSide1:.99*R,side2:T,zSide2:.99*O}}}(t),function(t){function e(t,e){var i,s=t.plotLeft,a=t.plotWidth+s,n=t.plotTop,l=t.plotHeight+n,h=s+t.plotWidth/2,c=n+t.plotHeight/2,p={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},x=1;return i=[{x:s,y:n,z:0},{x:s,y:n,z:e}],o([0,1],function(t){i.push({x:a,y:i[t].y,z:i[t].z})}),o([0,1,2,3],function(t){i.push({x:i[t].x,y:l,z:i[t].z})}),i=r(i,t,!1),o(i,function(t){p.minX=Math.min(p.minX,t.x),p.maxX=Math.max(p.maxX,t.x),p.minY=Math.min(p.minY,t.y),p.maxY=Math.max(p.maxY,t.y)}),s>p.minX&&(x=Math.min(x,1-Math.abs((s+h)/(p.minX+h))%1)),a<p.maxX&&(x=Math.min(x,(a-h)/(p.maxX-h))),n>p.minY&&(x=p.minY<0?Math.min(x,(n+c)/(-p.minY+n+c)):Math.min(x,1-(n+c)/(p.minY+c)%1)),l<p.maxY&&(x=Math.min(x,Math.abs((l-c)/(p.maxY-c)))),x}var i=t.addEvent,s=t.Chart,o=t.each,a=t.merge,r=t.perspective,n=t.pick,l=t.wrap;s.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},s.prototype.propsRequireDirtyBox.push("chart.options3d"),s.prototype.propsRequireUpdateSeries.push("chart.options3d"),i(s,"afterInit",function(){var t=this.options;this.is3d()&&o(t.series,function(e){var i=e.type||t.chart.type||t.chart.defaultSeriesType;"scatter"===i&&(e.type="scatter3d")})}),t.wrap(t.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))});var h=t.getOptions(),c={chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:"default",frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}};a(!0,h,c),i(s,"afterGetContainer",function(){this.renderer.definition({tagName:"style",textContent:".highcharts-3d-top{filter: url(#highcharts-brighter)}\n.highcharts-3d-side{filter: url(#highcharts-darker)}\n"})}),l(s.prototype,"setClassName",function(t){t.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}),i(t.Chart,"afterSetChartSize",function(){var t=this,i=t.options.chart.options3d;if(t.is3d()){var s=t.inverted,o=t.clipBox,a=t.margin,r=s?"y":"x",n=s?"x":"y",l=s?"height":"width",h=s?"width":"height";o[r]=-(a[3]||0),o[n]=-(a[0]||0),o[l]=t.chartWidth+(a[3]||0)+(a[1]||0),o[h]=t.chartHeight+(a[0]||0)+(a[2]||0),t.scale3d=1,i.fitToPlot===!0&&(t.scale3d=e(t,i.depth)),t.frame3d=this.get3dFrame()}}),i(s,"beforeRedraw",function(){this.is3d()&&(this.isDirtyBox=!0)}),i(s,"beforeRender",function(){this.is3d()&&(this.frame3d=this.get3dFrame())}),l(s.prototype,"renderSeries",function(t){var e,i=this.series.length;if(this.is3d())for(;i--;)e=this.series[i],e.translate(),e.render();else t.call(this)}),i(s,"afterDrawChartBox",function(){if(this.is3d()){var e=this,i=e.renderer,s=this.options.chart.options3d,o=e.get3dFrame(),a=this.plotLeft,r=this.plotLeft+this.plotWidth,n=this.plotTop,l=this.plotTop+this.plotHeight,h=0,c=s.depth,p=a-(o.left.visible?o.left.size:0),x=r+(o.right.visible?o.right.size:0),d=n-(o.top.visible?o.top.size:0),y=l+(o.bottom.visible?o.bottom.size:0),f=h-(o.front.visible?o.front.size:0),z=c+(o.back.visible?o.back.size:0),u=e.hasRendered?"animate":"attr";this.frame3d=o,this.frameShapes||(this.frameShapes={bottom:i.polyhedron().add(),top:i.polyhedron().add(),left:i.polyhedron().add(),right:i.polyhedron().add(),back:i.polyhedron().add(),front:i.polyhedron().add()}),this.frameShapes.bottom[u]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:o.bottom.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.bottom.color).brighten(.1).get(),vertexes:[{x:p,y:y,z:f},{x:x,y:y,z:f},{x:x,y:y,z:z},{x:p,y:y,z:z}],enabled:o.bottom.visible},{fill:t.color(o.bottom.color).brighten(.1).get(),vertexes:[{x:a,y:l,z:c},{x:r,y:l,z:c},{x:r,y:l,z:h},{x:a,y:l,z:h}],enabled:o.bottom.visible},{fill:t.color(o.bottom.color).brighten(-.1).get(),vertexes:[{x:p,y:y,z:f},{x:p,y:y,z:z},{x:a,y:l,z:c},{x:a,y:l,z:h}],enabled:o.bottom.visible&&!o.left.visible},{fill:t.color(o.bottom.color).brighten(-.1).get(),vertexes:[{x:x,y:y,z:z},{x:x,y:y,z:f},{x:r,y:l,z:h},{x:r,y:l,z:c}],enabled:o.bottom.visible&&!o.right.visible},{fill:t.color(o.bottom.color).get(),vertexes:[{x:x,y:y,z:f},{x:p,y:y,z:f},{x:a,y:l,z:h},{x:r,y:l,z:h}],enabled:o.bottom.visible&&!o.front.visible},{fill:t.color(o.bottom.color).get(),vertexes:[{x:p,y:y,z:z},{x:x,y:y,z:z},{x:r,y:l,z:c},{x:a,y:l,z:c}],enabled:o.bottom.visible&&!o.back.visible}]}),this.frameShapes.top[u]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:o.top.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.top.color).brighten(.1).get(),vertexes:[{x:p,y:d,z:z},{x:x,y:d,z:z},{x:x,y:d,z:f},{x:p,y:d,z:f}],enabled:o.top.visible},{fill:t.color(o.top.color).brighten(.1).get(),vertexes:[{x:a,y:n,z:h},{x:r,y:n,z:h},{x:r,y:n,z:c},{x:a,y:n,z:c}],enabled:o.top.visible},{fill:t.color(o.top.color).brighten(-.1).get(),vertexes:[{x:p,y:d,z:z},{x:p,y:d,z:f},{x:a,y:n,z:h},{x:a,y:n,z:c}],enabled:o.top.visible&&!o.left.visible},{fill:t.color(o.top.color).brighten(-.1).get(),vertexes:[{x:x,y:d,z:f},{x:x,y:d,z:z},{x:r,y:n,z:c},{x:r,y:n,z:h}],enabled:o.top.visible&&!o.right.visible},{fill:t.color(o.top.color).get(),vertexes:[{x:p,y:d,z:f},{x:x,y:d,z:f},{x:r,y:n,z:h},{x:a,y:n,z:h}],enabled:o.top.visible&&!o.front.visible},{fill:t.color(o.top.color).get(),vertexes:[{x:x,y:d,z:z},{x:p,y:d,z:z},{x:a,y:n,z:c},{x:r,y:n,z:c}],enabled:o.top.visible&&!o.back.visible}]}),this.frameShapes.left[u]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:o.left.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.left.color).brighten(.1).get(),vertexes:[{x:p,y:y,z:f},{x:a,y:l,z:h},{x:a,y:l,z:c},{x:p,y:y,z:z}],enabled:o.left.visible&&!o.bottom.visible},{fill:t.color(o.left.color).brighten(.1).get(),vertexes:[{x:p,y:d,z:z},{x:a,y:n,z:c},{x:a,y:n,z:h},{x:p,y:d,z:f}],enabled:o.left.visible&&!o.top.visible},{fill:t.color(o.left.color).brighten(-.1).get(),vertexes:[{x:p,y:y,z:z},{x:p,y:d,z:z},{x:p,y:d,z:f},{x:p,y:y,z:f}],enabled:o.left.visible},{fill:t.color(o.left.color).brighten(-.1).get(),vertexes:[{x:a,y:n,z:c},{x:a,y:l,z:c},{x:a,y:l,z:h},{x:a,y:n,z:h}],enabled:o.left.visible},{fill:t.color(o.left.color).get(),vertexes:[{x:p,y:y,z:f},{x:p,y:d,z:f},{x:a,y:n,z:h},{x:a,y:l,z:h}],enabled:o.left.visible&&!o.front.visible},{fill:t.color(o.left.color).get(),vertexes:[{x:p,y:d,z:z},{x:p,y:y,z:z},{x:a,y:l,z:c},{x:a,y:n,z:c}],enabled:o.left.visible&&!o.back.visible}]}),this.frameShapes.right[u]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:o.right.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.right.color).brighten(.1).get(),vertexes:[{x:x,y:y,z:z},{x:r,y:l,z:c},{x:r,y:l,z:h},{x:x,y:y,z:f}],enabled:o.right.visible&&!o.bottom.visible},{fill:t.color(o.right.color).brighten(.1).get(),vertexes:[{x:x,y:d,z:f},{x:r,y:n,z:h},{x:r,y:n,z:c},{x:x,y:d,z:z}],enabled:o.right.visible&&!o.top.visible},{fill:t.color(o.right.color).brighten(-.1).get(),vertexes:[{x:r,y:n,z:h},{x:r,y:l,z:h},{x:r,y:l,z:c},{x:r,y:n,z:c}],enabled:o.right.visible},{fill:t.color(o.right.color).brighten(-.1).get(),vertexes:[{x:x,y:y,z:f},{x:x,y:d,z:f},{x:x,y:d,z:z},{x:x,y:y,z:z}],enabled:o.right.visible},{fill:t.color(o.right.color).get(),vertexes:[{x:x,y:d,z:f},{x:x,y:y,z:f},{x:r,y:l,z:h},{x:r,y:n,z:h}],enabled:o.right.visible&&!o.front.visible},{fill:t.color(o.right.color).get(),vertexes:[{x:x,y:y,z:z},{x:x,y:d,z:z},{x:r,y:n,z:c},{x:r,y:l,z:c}],enabled:o.right.visible&&!o.back.visible}]}),this.frameShapes.back[u]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:o.back.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.back.color).brighten(.1).get(),vertexes:[{x:x,y:y,z:z},{x:p,y:y,z:z},{x:a,y:l,z:c},{x:r,y:l,z:c}],enabled:o.back.visible&&!o.bottom.visible},{fill:t.color(o.back.color).brighten(.1).get(),vertexes:[{x:p,y:d,z:z},{x:x,y:d,z:z},{x:r,y:n,z:c},{x:a,y:n,z:c}],enabled:o.back.visible&&!o.top.visible},{fill:t.color(o.back.color).brighten(-.1).get(),vertexes:[{x:p,y:y,z:z},{x:p,y:d,z:z},{x:a,y:n,z:c},{x:a,y:l,z:c}],enabled:o.back.visible&&!o.left.visible},{fill:t.color(o.back.color).brighten(-.1).get(),vertexes:[{x:x,y:d,z:z},{x:x,y:y,z:z},{x:r,y:l,z:c},{x:r,y:n,z:c}],enabled:o.back.visible&&!o.right.visible},{fill:t.color(o.back.color).get(),vertexes:[{x:a,y:n,z:c},{x:r,y:n,z:c},{x:r,y:l,z:c},{x:a,y:l,z:c}],enabled:o.back.visible},{fill:t.color(o.back.color).get(),vertexes:[{x:p,y:y,z:z},{x:x,y:y,z:z},{x:x,y:d,z:z},{x:p,y:d,z:z}],enabled:o.back.visible}]}),this.frameShapes.front[u]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:o.front.frontFacing?-1e3:1e3,faces:[{fill:t.color(o.front.color).brighten(.1).get(),vertexes:[{x:p,y:y,z:f},{x:x,y:y,z:f},{x:r,y:l,z:h},{x:a,y:l,z:h}],enabled:o.front.visible&&!o.bottom.visible},{fill:t.color(o.front.color).brighten(.1).get(),vertexes:[{x:x,y:d,z:f},{x:p,y:d,z:f},{x:a,y:n,z:h},{x:r,y:n,z:h}],enabled:o.front.visible&&!o.top.visible},{fill:t.color(o.front.color).brighten(-.1).get(),vertexes:[{x:p,y:d,z:f},{x:p,y:y,z:f},{x:a,y:l,z:h},{x:a,y:n,z:h}],enabled:o.front.visible&&!o.left.visible},{fill:t.color(o.front.color).brighten(-.1).get(),vertexes:[{x:x,y:y,z:f},{x:x,y:d,z:f},{x:r,y:n,z:h},{x:r,y:l,z:h}],enabled:o.front.visible&&!o.right.visible},{fill:t.color(o.front.color).get(),vertexes:[{x:r,y:n,z:h},{x:a,y:n,z:h},{x:a,y:l,z:h},{x:r,y:l,z:h}],enabled:o.front.visible},{fill:t.color(o.front.color).get(),vertexes:[{x:x,y:y,z:f},{x:p,y:y,z:f},{x:p,y:d,z:f},{x:x,y:d,z:f}],enabled:o.front.visible}]})}}),s.prototype.retrieveStacks=function(t){var e,i=this.series,s={},a=1;return o(this.series,function(o){e=n(o.options.stack,t?0:i.length-1-o.index),s[e]?s[e].series.push(o):(s[e]={series:[o],position:a},a++)}),s.totalStacks=a+1,s},s.prototype.get3dFrame=function(){var e=this,i=e.options.chart.options3d,s=i.frame,a=e.plotLeft,l=e.plotLeft+e.plotWidth,h=e.plotTop,c=e.plotTop+e.plotHeight,p=0,x=i.depth,d=function(i){var s=t.shapeArea3d(i,e);return s>.5?1:s<-.5?-1:0},y=d([{x:a,y:c,z:x},{x:l,y:c,z:x},{x:l,y:c,z:p},{x:a,y:c,z:p}]),f=d([{x:a,y:h,z:p},{x:l,y:h,z:p},{x:l,y:h,z:x},{x:a,y:h,z:x}]),z=d([{x:a,y:h,z:p},{x:a,y:h,z:x},{x:a,y:c,z:x},{x:a,y:c,z:p}]),u=d([{x:l,y:h,z:x},{x:l,y:h,z:p},{x:l,y:c,z:p},{x:l,y:c,z:x}]),b=d([{x:a,y:c,z:p},{x:l,y:c,z:p},{x:l,y:h,z:p},{x:a,y:h,z:p}]),v=d([{x:a,y:h,z:x},{x:l,y:h,z:x},{x:l,y:c,z:x},{x:a,y:c,z:x}]),g=!1,m=!1,M=!1,A=!1,P=!1,k=!0;o([].concat(e.xAxis,e.yAxis,e.zAxis),function(t){t&&(t.horiz?t.opposite?m=!0:g=!0:t.opposite?A=!0:M=!0)});var S=function(t,e,i){for(var s=["size","color","visible"],o={},a=0;a<s.length;a++)for(var r=s[a],l=0;l<t.length;l++)if("object"==typeof t[l]){var h=t[l][r];if(void 0!==h&&null!==h){o[r]=h;break}}var c=i;return o.visible===!0||o.visible===!1?c=o.visible:"auto"===o.visible&&(c=e>0),{size:n(o.size,1),color:n(o.color,"none"),frontFacing:e>0,visible:c}},L={bottom:S([s.bottom,s.top,s],y,g),top:S([s.top,s.bottom,s],f,m),left:S([s.left,s.right,s.side,s],z,M),right:S([s.right,s.left,s.side,s],u,A),back:S([s.back,s.front,s],v,k),front:S([s.front,s.back,s],b,P)};if("auto"===i.axisLabelPosition){var I=function(t,e){return t.visible!==e.visible||t.visible&&e.visible&&t.frontFacing!==e.frontFacing},w=[];I(L.left,L.front)&&w.push({y:(h+c)/2,x:a,z:p,xDir:{x:1,y:0,z:0}}),I(L.left,L.back)&&w.push({y:(h+c)/2,x:a,z:x,xDir:{x:0,y:0,z:-1}}),I(L.right,L.front)&&w.push({y:(h+c)/2,x:l,z:p,xDir:{x:0,y:0,z:1}}),I(L.right,L.back)&&w.push({y:(h+c)/2,x:l,z:x,xDir:{x:-1,y:0,z:0}});var D=[];I(L.bottom,L.front)&&D.push({x:(a+l)/2,y:c,z:p,xDir:{x:1,y:0,z:0}}),I(L.bottom,L.back)&&D.push({x:(a+l)/2,y:c,z:x,xDir:{x:-1,y:0,z:0}});var Y=[];I(L.top,L.front)&&Y.push({x:(a+l)/2,y:h,z:p,xDir:{x:1,y:0,z:0}}),I(L.top,L.back)&&Y.push({x:(a+l)/2,y:h,z:x,xDir:{x:-1,y:0,z:0}});var X=[];I(L.bottom,L.left)&&X.push({z:(p+x)/2,y:c,x:a,xDir:{x:0,y:0,z:-1}}),I(L.bottom,L.right)&&X.push({z:(p+x)/2,y:c,x:l,xDir:{x:0,y:0,z:1}});var Z=[];I(L.top,L.left)&&Z.push({z:(p+x)/2,y:h,x:a,xDir:{x:0,y:0,z:-1}}),I(L.top,L.right)&&Z.push({z:(p+x)/2,y:h,x:l,xDir:{x:0,y:0,z:1}});var T=function(t,i,s){if(0===t.length)return null;if(1===t.length)return t[0];for(var o=0,a=r(t,e,!1),n=1;n<a.length;n++)s*a[n][i]>s*a[o][i]?o=n:s*a[n][i]===s*a[o][i]&&a[n].z<a[o].z&&(o=n);return t[o]};L.axes={y:{left:T(w,"x",-1),right:T(w,"x",1)},x:{top:T(Y,"y",-1),bottom:T(D,"y",1)},z:{top:T(Z,"y",-1),bottom:T(X,"y",1)}}}else L.axes={y:{left:{x:a,z:p,xDir:{x:1,y:0,z:0}},right:{x:l,z:p,xDir:{x:0,y:0,z:1}}},x:{top:{y:h,z:p,xDir:{x:1,y:0,z:0}},bottom:{y:c,z:p,xDir:{x:1,y:0,z:0}}},z:{top:{x:M?l:a,y:h,xDir:M?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:M?l:a,y:c,xDir:M?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}};return L},t.Fx.prototype.matrixSetter=function(){var e;if(this.pos<1&&(t.isArray(this.start)||t.isArray(this.end))){var i=this.start||[1,0,0,1,0,0],s=this.end||[1,0,0,1,0,0];e=[];for(var o=0;o<6;o++)e.push(this.pos*s[o]+(1-this.pos)*i[o])}else e=this.end;this.elem.attr(this.prop,e,null,!0)}}(t),function(t){function e(t,e,i){if(!t.chart.is3d()||"colorAxis"===t.coll)return e;var s,o=t.chart,a=r*o.options.chart.options3d.alpha,n=r*o.options.chart.options3d.beta,l=p(i&&t.options.title.position3d,t.options.labels.position3d),h=p(i&&t.options.title.skew3d,t.options.labels.skew3d),d=o.frame3d,y=o.plotLeft,f=o.plotWidth+y,z=o.plotTop,u=o.plotHeight+z,b=!1,v=0,g=0,m={x:0,y:1,z:0};if(e=t.swapZ({x:e.x,y:e.y,z:0}),t.isZAxis)if(t.opposite){if(null===d.axes.z.top)return{};g=e.y-z,e.x=d.axes.z.top.x,e.y=d.axes.z.top.y,s=d.axes.z.top.xDir,b=!d.top.frontFacing}else{if(null===d.axes.z.bottom)return{};g=e.y-u,e.x=d.axes.z.bottom.x,e.y=d.axes.z.bottom.y,s=d.axes.z.bottom.xDir,b=!d.bottom.frontFacing}else if(t.horiz)if(t.opposite){if(null===d.axes.x.top)return{};g=e.y-z,e.y=d.axes.x.top.y,e.z=d.axes.x.top.z,s=d.axes.x.top.xDir,b=!d.top.frontFacing}else{if(null===d.axes.x.bottom)return{};g=e.y-u,e.y=d.axes.x.bottom.y,e.z=d.axes.x.bottom.z,s=d.axes.x.bottom.xDir,b=!d.bottom.frontFacing}else if(t.opposite){if(null===d.axes.y.right)return{};v=e.x-f,e.x=d.axes.y.right.x,e.z=d.axes.y.right.z,s=d.axes.y.right.xDir,s={x:s.z,y:s.y,z:-s.x}}else{if(null===d.axes.y.left)return{};v=e.x-y,e.x=d.axes.y.left.x,e.z=d.axes.y.left.z,s=d.axes.y.left.xDir}if("chart"===l);else if("flap"===l)if(t.horiz){var M=Math.sin(a),A=Math.cos(a);t.opposite&&(M=-M),b&&(M=-M),m={x:s.z*M,y:A,z:-s.x*M}}else s={x:Math.cos(n),y:0,z:Math.sin(n)};else if("ortho"===l)if(t.horiz){var P=Math.sin(a),k=Math.cos(a),S=Math.sin(n),L=Math.cos(n),I={x:S*k,y:-P,z:-k*L};m={x:s.y*I.z-s.z*I.y,y:s.z*I.x-s.x*I.z,z:s.x*I.y-s.y*I.x};var w=1/Math.sqrt(m.x*m.x+m.y*m.y+m.z*m.z);b&&(w=-w),m={x:w*m.x,y:w*m.y,z:w*m.z}}else s={x:Math.cos(n),y:0,z:Math.sin(n)};else t.horiz?m={x:Math.sin(n)*Math.sin(a),y:Math.cos(a),z:-Math.cos(n)*Math.sin(a)}:s={x:Math.cos(n),y:0,z:Math.sin(n)};e.x+=v*s.x+g*m.x,e.y+=v*s.y+g*m.y,e.z+=v*s.z+g*m.z;var D=c([e],t.chart)[0];if(h){var Y=x(c([e,{x:e.x+s.x,y:e.y+s.y,z:e.z+s.z},{x:e.x+m.x,y:e.y+m.y,z:e.z+m.z}],t.chart))<0;Y&&(s={x:-s.x,y:-s.y,z:-s.z});var X=c([{x:e.x,y:e.y,z:e.z},{x:e.x+s.x,y:e.y+s.y,z:e.z+s.z},{x:e.x+m.x,y:e.y+m.y,z:e.z+m.z}],t.chart);D.matrix=[X[1].x-X[0].x,X[1].y-X[0].y,X[2].x-X[0].x,X[2].y-X[0].y,D.x,D.y],D.matrix[4]-=D.x*D.matrix[0]+D.y*D.matrix[2],D.matrix[5]-=D.x*D.matrix[1]+D.y*D.matrix[3]}else D.matrix=null;return D}var i,s=t.addEvent,o=t.Axis,a=t.Chart,r=t.deg2rad,n=t.each,l=t.extend,h=t.merge,c=t.perspective,p=t.pick,x=t.shapeArea,d=t.splat,y=t.Tick,f=t.wrap,z={labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}};h(!0,o.prototype.defaultOptions,z),s(o,"afterSetOptions",function(){var t;this.chart.is3d&&this.chart.is3d()&&"colorAxis"!==this.coll&&(t=this.options,t.tickWidth=p(t.tickWidth,0),t.gridLineWidth=p(t.gridLineWidth,1))}),f(o.prototype,"getPlotLinePath",function(t){var e=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()||"colorAxis"===this.coll)return e;if(null===e)return e;var i=this.chart,s=i.options.chart.options3d,o=this.isZAxis?i.plotWidth:s.depth,a=i.frame3d,r=[this.swapZ({x:e[1],y:e[2],z:0}),this.swapZ({x:e[1],y:e[2],z:o}),this.swapZ({x:e[4],y:e[5],z:0}),this.swapZ({x:e[4],y:e[5],z:o})],n=[];return this.horiz?this.isZAxis?(a.left.visible&&n.push(r[0],r[2]),a.right.visible&&n.push(r[1],r[3]),a.top.visible&&n.push(r[0],r[1]),a.bottom.visible&&n.push(r[2],r[3])):(a.front.visible&&n.push(r[0],r[2]),a.back.visible&&n.push(r[1],r[3]),a.top.visible&&n.push(r[0],r[1]),a.bottom.visible&&n.push(r[2],r[3])):(a.front.visible&&n.push(r[0],r[2]),a.back.visible&&n.push(r[1],r[3]),a.left.visible&&n.push(r[0],r[1]),a.right.visible&&n.push(r[2],r[3])),n=c(n,this.chart,!1),this.chart.renderer.toLineSegments(n)}),f(o.prototype,"getLinePath",function(t){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:t.apply(this,[].slice.call(arguments,1))}),f(o.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d()||"colorAxis"===this.coll)return t.apply(this,[].slice.call(arguments,1));var e=arguments,i=e[1],s=e[2],o=[],a=this.getPlotLinePath(i),r=this.getPlotLinePath(s);if(a&&r)for(var n=0;n<a.length;n+=6)o.push("M",a[n+1],a[n+2],"L",a[n+4],a[n+5],"L",r[n+4],r[n+5],"L",r[n+1],r[n+2],"Z");return o}),f(y.prototype,"getMarkPath",function(t){var i=t.apply(this,[].slice.call(arguments,1)),s=[e(this.axis,{x:i[1],y:i[2],z:0}),e(this.axis,{x:i[4],y:i[5],z:0})];return this.axis.chart.renderer.toLineSegments(s)}),s(y,"afterGetLabelPosition",function(t){l(t.pos,e(this.axis,t.pos))}),f(o.prototype,"getTitlePosition",function(t){var i=t.apply(this,[].slice.call(arguments,1));return e(this,i,!0)}),s(o,"drawCrosshair",function(t){this.chart.is3d()&&"colorAxis"!==this.coll&&t.point&&(t.point.crosshairPos=this.isXAxis?t.point.plotXold||t.point.plotX:this.len-(t.point.plotYold||t.point.plotY))}),s(o,"destroy",function(){n(["backFrame","bottomFrame","sideFrame"],function(t){this[t]&&(this[t]=this[t].destroy())},this)}),o.prototype.swapZ=function(t,e){if(this.isZAxis){var i=e?0:this.chart.plotLeft;return{x:i+t.z,y:t.y,z:t.x-i}}return t},i=t.ZAxis=function(){this.init.apply(this,arguments)},l(i.prototype,o.prototype),l(i.prototype,{isZAxis:!0,setOptions:function(t){t=h({offset:0,lineWidth:0},t),o.prototype.setOptions.call(this,t),this.coll="zAxis"},setAxisSize:function(){o.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),n(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var s,o=i.options,a=o.threshold;t.hasVisibleSeries=!0,t.positiveValuesOnly&&a<=0&&(a=null),s=i.zData,s.length&&(t.dataMin=Math.min(p(t.dataMin,s[0]),Math.min.apply(null,s)),t.dataMax=Math.max(p(t.dataMax,s[0]),Math.max.apply(null,s)))}})}}),s(a,"afterGetAxes",function(){var t=this,e=this.options,s=e.zAxis=d(e.zAxis||{});t.is3d()&&(this.zAxis=[],n(s,function(e,s){e.index=s,e.isX=!0;var o=new i(t,e);o.setScale()}))})}(t),function(t){var e=t.addEvent,i=t.perspective,s=t.pick;e(t.Series,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),t.Series.prototype.translate3dPoints=function(){var t,e,o,a,r,n=this,l=n.chart,h=s(n.zAxis,l.options.zAxis[0]),c=[];for(r=0;r<n.data.length;r++)t=n.data[r],h&&h.translate?(a=h.isLog&&h.val2lin?h.val2lin(t.z):t.z,t.plotZ=h.translate(a),t.isInside=!!t.isInside&&(a>=h.min&&a<=h.max)):t.plotZ=0,c.push({x:s(t.plotXold,t.plotX),y:s(t.plotYold,t.plotY),z:s(t.plotZold,t.plotZ)});for(e=i(c,l,!0),r=0;r<n.data.length;r++)t=n.data[r],o=e[r],t.plotXold=t.plotX,t.plotYold=t.plotY,t.plotZold=t.plotZ,t.plotX=o.x,t.plotY=o.y,t.plotZ=o.z}}(t),function(t){var e=t.addEvent,i=t.each,s=t.perspective,o=t.pick,a=t.Series,r=t.seriesTypes,n=t.inArray,l=t.svg,h=t.wrap;h(r.column.prototype,"translate",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),h(t.Series.prototype,"alignDataLabel",function(t){arguments[3].outside3dPlot=arguments[1].outside3dPlot,t.apply(this,[].slice.call(arguments,1))}),h(t.Series.prototype,"justifyDataLabel",function(t){return!arguments[2].outside3dPlot&&t.apply(this,[].slice.call(arguments,1))}),r.column.prototype.translate3dPoints=function(){},r.column.prototype.translate3dShapes=function(){var t=this,e=t.chart,o=t.options,a=o.depth||25,r=o.stacking?o.stack||0:t.index,n=r*(a+(o.groupZPadding||1)),l=t.borderWidth%2?.5:0;e.inverted&&!t.yAxis.reversed&&(l*=-1),o.grouping!==!1&&(n=0),n+=o.groupZPadding||1,i(t.data,function(o){if(o.outside3dPlot=null,null!==o.y){var r,h=o.shapeArgs,c=o.tooltipPos,p=[["x","width"],["y","height"]];i(p,function(e){if(r=h[e[0]]-l,r<0&&(h[e[1]]+=h[e[0]]+l,h[e[0]]=-l,r=0),r+h[e[1]]>t[e[0]+"Axis"].len&&0!==h[e[1]]&&(h[e[1]]=t[e[0]+"Axis"].len-h[e[0]]),0!==h[e[1]]&&(h[e[0]]>=t[e[0]+"Axis"].len||h[e[0]]+h[e[1]]<=l)){for(var i in h)h[i]=0;o.outside3dPlot=!0}}),o.shapeType="cuboid",h.z=n,h.depth=a,h.insidePlotArea=!0,c=s([{x:c[0],y:c[1],z:n}],e,!0)[0],o.tooltipPos=[c.x,c.y]}}),t.z=n},h(r.column.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments,s=e[1],o=this.yAxis,a=this,r=this.yAxis.reversed;
l&&(s?i(a.data,function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,r||(t.stackY?t.shapeArgs.y=t.plotY+o.translate(t.stackY):t.shapeArgs.y=t.plotY+(t.negative?-t.height:t.height)))}):(i(a.data,function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,a.options.animation))}),this.drawDataLabels(),a.animate=null))}else t.apply(this,[].slice.call(arguments,1))}),h(r.column.prototype,"plotGroup",function(t,e,i,s,o,a){return this.chart.is3d()&&a&&!this[e]&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(a)),this[e]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[e].survive=!0),t.apply(this,Array.prototype.slice.call(arguments,1))}),h(r.column.prototype,"setVisible",function(t,e){var s,o=this;o.chart.is3d()&&i(o.data,function(t){t.visible=t.options.visible=e=void 0===e?!t.visible:e,s=e?"visible":"hidden",o.options.data[n(t,o.data)]=t.options,t.graphic&&t.graphic.attr({visibility:s})}),t.apply(this,Array.prototype.slice.call(arguments,1))}),r.column.prototype.handle3dGrouping=!0,e(a,"afterInit",function(){if(this.chart.is3d()&&this.handle3dGrouping){var t=this.options,e=t.grouping,i=t.stacking,s=o(this.yAxis.options.reversedStacks,!0),a=0;if(void 0===e||e){var r,n=this.chart.retrieveStacks(i),l=t.stack||0;for(r=0;r<n[l].series.length&&n[l].series[r]!==this;r++);a=10*(n.totalStacks-n[l].position)+(s?r:-r),this.xAxis.reversed||(a=10*n.totalStacks-a)}t.zIndex=a}}),h(a.prototype,"alignDataLabel",function(t){if(this.chart.is3d()&&("column"===this.type||"columnrange"===this.type)){var e=this,i=e.chart,o=arguments,a=o[4],r=o[1],n={x:a.x,y:a.y,z:e.z};n=s([n],i,!0)[0],a.x=n.x,a.y=r.outside3dPlot?-9e9:n.y}t.apply(this,[].slice.call(arguments,1))}),h(t.StackItem.prototype,"getStackBox",function(e,i){var s=e.apply(this,[].slice.call(arguments,1));if(i.is3d()){var o={x:s.x,y:s.y,z:0};o=t.perspective([o],i,!0)[0],s.x=o.x,s.y=o.y}return s})}(t),function(t){var e=t.deg2rad,i=t.each,s=(t.pick,t.seriesTypes),o=t.svg,a=t.wrap;a(s.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var s=this,o=s.options,a=o.depth||0,r=s.chart.options.chart.options3d,n=r.alpha,l=r.beta,h=o.stacking?(o.stack||0)*a:s._i*a;h+=a/2,o.grouping!==!1&&(h=0),i(s.data,function(t){var i,r=t.shapeArgs;t.shapeType="arc3d",r.z=h,r.depth=.75*a,r.alpha=n,r.beta=l,r.center=s.center,i=(r.end+r.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(i)*o.slicedOffset*Math.cos(n*e)),translateY:Math.round(Math.sin(i)*o.slicedOffset*Math.cos(n*e))}})}}),a(s.pie.prototype.pointClass.prototype,"haloPath",function(t){var e=arguments;return this.series.chart.is3d()?[]:t.call(this,e[1])}),a(s.pie.prototype,"drawPoints",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&i(this.points,function(t){var e=t.graphic;e&&e[t.y&&t.visible?"show":"hide"]()})}),a(s.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var s=this,o=s.chart,a=o.options.chart.options3d;i(s.data,function(t){var s=t.shapeArgs,o=s.r,r=(s.alpha||a.alpha)*e,n=(s.beta||a.beta)*e,l=(s.start+s.end)/2,h=t.labelPos,c=[0,2,4],p=-o*(1-Math.cos(r))*Math.sin(l),x=o*(Math.cos(n)-1)*Math.cos(l);i(c,function(t){h[t]+=x,h[t+1]+=p})})}t.apply(this,[].slice.call(arguments,1))}),a(s.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),a(s.pie.prototype,"animate",function(t){if(this.chart.is3d()){var e,i=arguments,s=i[1],a=this.options.animation,r=this.center,n=this.group,l=this.markerGroup;o&&(a===!0&&(a={}),s?(n.oldtranslateX=n.translateX,n.oldtranslateY=n.translateY,e={translateX:r[0],translateY:r[1],scaleX:.001,scaleY:.001},n.attr(e),l&&(l.attrSetters=n.attrSetters,l.attr(e))):(e={translateX:n.oldtranslateX,translateY:n.oldtranslateY,scaleX:1,scaleY:1},n.animate(e,a),l&&l.animate(e,a),this.animate=null))}else t.apply(this,[].slice.call(arguments,1))})}(t),function(t){var e=t.Point,i=t.seriesType,s=t.seriesTypes;i("scatter3d","scatter",{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}},{pointAttribs:function(e){var i=s.scatter.prototype.pointAttribs.apply(this,arguments);return this.chart.is3d()&&e&&(i.zIndex=t.pointCameraDistance(e,this.chart)),i},axisTypes:["xAxis","yAxis","zAxis"],pointArrayMap:["x","y","z"],parallelArrays:["x","y","z"],directTouch:!0},{applyOptions:function(){return e.prototype.applyOptions.apply(this,arguments),void 0===this.z&&(this.z=0),this}})}(t),function(t){}(t)});