(function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)})(function(t){(function(t){var e=t.deg2rad,i=t.pick;t.perspective=function(s,o,a){var r=o.options.chart.options3d,n=!!a&&o.inverted,l=o.plotWidth/2,h=o.plotHeight/2,c=r.depth/2,p=i(r.depth,1)*i(r.viewDistance,0),d=o.scale3d||1,x=e*r.beta*(n?-1:1),r=e*r.alpha*(n?-1:1),y=Math.cos(r),f=Math.cos(-x),z=Math.sin(r),u=Math.sin(-x);return a||(l+=o.plotLeft,h+=o.plotTop),t.map(s,function(t){var e,i;i=(n?t.y:t.x)-l;var s=(n?t.x:t.y)-h,o=(t.z||0)-c;return e=f*i-u*o,t=-z*u*i+y*s-f*z*o,i=y*u*i+z*s+y*f*o,s=0<p&&p<Number.POSITIVE_INFINITY?p/(i+c+p):1,e=e*s*d+l,t=t*s*d+h,{x:n?t:e,y:n?e:t,z:i*d+c}})},t.pointCameraDistance=function(t,e){var s=e.options.chart.options3d,o=e.plotWidth/2;return e=e.plotHeight/2,s=i(s.depth,1)*i(s.viewDistance,0)+s.depth,Math.sqrt(Math.pow(o-t.plotX,2)+Math.pow(e-t.plotY,2)+Math.pow(s-t.plotZ,2))},t.shapeArea=function(t){var e,i,s=0;for(e=0;e<t.length;e++)i=(e+1)%t.length,s+=t[e].x*t[i].y-t[i].x*t[e].y;return s/2},t.shapeArea3d=function(e,i,s){return t.shapeArea(t.perspective(e,i,s))}})(t),function(t){function e(t,i,s,o,a,r,n,l){var h=[],c=r-a;return r>a&&r-a>Math.PI/2+1e-4?(h=h.concat(e(t,i,s,o,a,a+Math.PI/2,n,l)),h=h.concat(e(t,i,s,o,a+Math.PI/2,r,n,l))):r<a&&a-r>Math.PI/2+1e-4?(h=h.concat(e(t,i,s,o,a,a-Math.PI/2,n,l)),h=h.concat(e(t,i,s,o,a-Math.PI/2,r,n,l))):["C",t+s*Math.cos(a)-s*v*c*Math.sin(a)+n,i+o*Math.sin(a)+o*v*c*Math.cos(a)+l,t+s*Math.cos(r)+s*v*c*Math.sin(r)+n,i+o*Math.sin(r)-o*v*c*Math.cos(r)+l,t+s*Math.cos(r)+n,i+o*Math.sin(r)+l]}var i=Math.cos,s=Math.PI,o=Math.sin,a=t.animObject,r=t.charts,n=t.color,l=t.defined,h=t.deg2rad,c=t.each,p=t.extend,d=t.inArray,x=t.map,y=t.merge,f=t.perspective,z=t.pick,u=t.SVGElement,b=t.SVGRenderer,g=t.wrap,v=4*(Math.sqrt(2)-1)/3/(s/2);g(b.prototype,"init",function(t){t.apply(this,[].slice.call(arguments,1)),c([{name:"darker",slope:.6},{name:"brighter",slope:1.4}],function(t){this.definition({tagName:"filter",id:"highcharts-"+t.name,children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",type:"linear",slope:t.slope},{tagName:"feFuncG",type:"linear",slope:t.slope},{tagName:"feFuncB",type:"linear",slope:t.slope}]}]})},this)}),b.prototype.toLinePath=function(t,e){var i=[];return c(t,function(t){i.push("L",t.x,t.y)}),t.length&&(i[0]="M",e&&i.push("Z")),i},b.prototype.toLineSegments=function(t){var e=[],i=!0;return c(t,function(t){e.push(i?"M":"L",t.x,t.y),i=!i}),e},b.prototype.face3d=function(e){var i=this,s=this.createElement("path");return s.vertexes=[],s.insidePlotArea=!1,s.enabled=!0,g(s,"attr",function(e,s){if("object"==typeof s&&(l(s.enabled)||l(s.vertexes)||l(s.insidePlotArea))){this.enabled=z(s.enabled,this.enabled),this.vertexes=z(s.vertexes,this.vertexes),this.insidePlotArea=z(s.insidePlotArea,this.insidePlotArea),delete s.enabled,delete s.vertexes,delete s.insidePlotArea;var o=f(this.vertexes,r[i.chartIndex],this.insidePlotArea),a=i.toLinePath(o,!0),o=t.shapeArea(o),o=this.enabled&&0<o?"visible":"hidden";s.d=a,s.visibility=o}return e.apply(this,[].slice.call(arguments,1))}),g(s,"animate",function(e,s){if("object"==typeof s&&(l(s.enabled)||l(s.vertexes)||l(s.insidePlotArea))){this.enabled=z(s.enabled,this.enabled),this.vertexes=z(s.vertexes,this.vertexes),this.insidePlotArea=z(s.insidePlotArea,this.insidePlotArea),delete s.enabled,delete s.vertexes,delete s.insidePlotArea;var o=f(this.vertexes,r[i.chartIndex],this.insidePlotArea),a=i.toLinePath(o,!0),o=t.shapeArea(o),o=this.enabled&&0<o?"visible":"hidden";s.d=a,this.attr("visibility",o)}return e.apply(this,[].slice.call(arguments,1))}),s.attr(e)},b.prototype.polyhedron=function(t){var e=this,i=this.g(),s=i.destroy;return i.faces=[],i.destroy=function(){for(var t=0;t<i.faces.length;t++)i.faces[t].destroy();return s.call(this)},g(i,"attr",function(t,s,o,a,r){if("object"==typeof s&&l(s.faces)){for(;i.faces.length>s.faces.length;)i.faces.pop().destroy();for(;i.faces.length<s.faces.length;)i.faces.push(e.face3d().add(i));for(var n=0;n<s.faces.length;n++)i.faces[n].attr(s.faces[n],null,a,r);delete s.faces}return t.apply(this,[].slice.call(arguments,1))}),g(i,"animate",function(t,s,o,a){if(s&&s.faces){for(;i.faces.length>s.faces.length;)i.faces.pop().destroy();for(;i.faces.length<s.faces.length;)i.faces.push(e.face3d().add(i));for(var r=0;r<s.faces.length;r++)i.faces[r].animate(s.faces[r],o,a);delete s.faces}return t.apply(this,[].slice.call(arguments,1))}),i.attr(t)},b.prototype.cuboid=function(t){var e=this.g(),i=e.destroy;return t=this.cuboidPath(t),e.front=this.path(t[0]).attr({class:"highcharts-3d-front"}).add(e),e.top=this.path(t[1]).attr({class:"highcharts-3d-top"}).add(e),e.side=this.path(t[2]).attr({class:"highcharts-3d-side"}).add(e),e.fillSetter=function(t){return this.front.attr({fill:t}),this.top.attr({fill:n(t).brighten(.1).get()}),this.side.attr({fill:n(t).brighten(-.1).get()}),this.color=t,e.fill=t,this},e.opacitySetter=function(t){return this.front.attr({opacity:t}),this.top.attr({opacity:t}),this.side.attr({opacity:t}),this},e.attr=function(t,e,i,s){if("string"==typeof t&&"undefined"!=typeof e){var o=t;t={},t[o]=e}return t.shapeArgs||l(t.x)?(t=this.renderer.cuboidPath(t.shapeArgs||t),this.front.attr({d:t[0]}),this.top.attr({d:t[1]}),this.side.attr({d:t[2]}),this):u.prototype.attr.call(this,t,void 0,i,s)},e.animate=function(t,e,i){return l(t.x)&&l(t.y)?(t=this.renderer.cuboidPath(t),this.front.animate({d:t[0]},e,i),this.top.animate({d:t[1]},e,i),this.side.animate({d:t[2]},e,i),this.attr({zIndex:-t[3]})):t.opacity?(this.front.animate(t,e,i),this.top.animate(t,e,i),this.side.animate(t,e,i)):u.prototype.animate.call(this,t,e,i),this},e.destroy=function(){return this.front.destroy(),this.top.destroy(),this.side.destroy(),i.call(this)},e.attr({zIndex:-t[3]}),e},t.SVGRenderer.prototype.cuboidPath=function(e){function i(t){return u[t]}var s,o,a=e.x,n=e.y,l=e.z,h=e.height,c=e.width,p=e.depth,d=r[this.chartIndex],y=d.options.chart.options3d.alpha,z=0,u=[{x:a,y:n,z:l},{x:a+c,y:n,z:l},{x:a+c,y:n+h,z:l},{x:a,y:n+h,z:l},{x:a,y:n+h,z:l+p},{x:a+c,y:n+h,z:l+p},{x:a+c,y:n,z:l+p},{x:a,y:n,z:l+p}],u=f(u,d,e.insidePlotArea);return o=function(e,s){var o=[[],-1];return e=x(e,i),s=x(s,i),0>t.shapeArea(e)?o=[e,0]:0>t.shapeArea(s)&&(o=[s,1]),o},s=o([3,2,1,0],[7,6,5,4]),e=s[0],c=s[1],s=o([1,6,7,0],[4,5,2,3]),h=s[0],p=s[1],s=o([1,2,5,6],[0,7,4,3]),o=s[0],s=s[1],1===s?z+=1e4*(1e3-a):s||(z+=1e4*a),z+=10*(!p||0<=y&&180>=y||360>y&&357.5<y?d.plotHeight-n:10+n),1===c?z+=100*l:c||(z+=100*(1e3-l)),z=-Math.round(z),[this.toLinePath(e,!0),this.toLinePath(h,!0),this.toLinePath(o,!0),z]},t.SVGRenderer.prototype.arc3d=function(t){function e(t){var e=!1,i={};t=y(t);for(var s in t)-1!==d(s,o)&&(i[s]=t[s],delete t[s],e=!0);return!!e&&i}var i=this.g(),s=i.renderer,o="x y r innerR start end".split(" ");return t=y(t),t.alpha*=h,t.beta*=h,i.top=s.path(),i.side1=s.path(),i.side2=s.path(),i.inn=s.path(),i.out=s.path(),i.onAdd=function(){var t=i.parentGroup,e=i.attr("class");i.top.add(i),c(["out","inn","side1","side2"],function(s){i[s].attr({class:e+" highcharts-3d-side"}).add(t)})},c(["addClass","removeClass"],function(t){i[t]=function(){var e=arguments;c(["top","out","inn","side1","side2"],function(s){i[s][t].apply(i[s],e)})}}),i.setPaths=function(t){var e=i.renderer.arc3dPath(t),s=100*e.zTop;i.attribs=t,i.top.attr({d:e.top,zIndex:e.zTop}),i.inn.attr({d:e.inn,zIndex:e.zInn}),i.out.attr({d:e.out,zIndex:e.zOut}),i.side1.attr({d:e.side1,zIndex:e.zSide1}),i.side2.attr({d:e.side2,zIndex:e.zSide2}),i.zIndex=s,i.attr({zIndex:s}),t.center&&(i.top.setRadialReference(t.center),delete t.center)},i.setPaths(t),i.fillSetter=function(t){var e=n(t).brighten(-.1).get();return this.fill=t,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:t}),this},c(["opacity","translateX","translateY","visibility"],function(t){i[t+"Setter"]=function(t,e){i[e]=t,c(["out","inn","side1","side2","top"],function(s){i[s].attr(e,t)})}}),g(i,"attr",function(t,s){var o;return"object"==typeof s&&(o=e(s))&&(p(i.attribs,o),i.setPaths(i.attribs)),t.apply(this,[].slice.call(arguments,1))}),g(i,"animate",function(t,s,o,r){var n,l,h=this.attribs;return delete s.center,delete s.z,delete s.depth,delete s.alpha,delete s.beta,l=a(z(o,this.renderer.globalAnimation)),l.duration&&(n=e(s),s.dummy=i.dummy++,n&&(l.step=function(t,e){function i(t){return h[t]+(z(n[t],h[t])-h[t])*e.pos}"dummy"===e.prop&&e.elem.setPaths(y(h,{x:i("x"),y:i("y"),r:i("r"),innerR:i("innerR"),start:i("start"),end:i("end")}))}),o=l),t.call(this,s,o,r)}),i.dummy=0,i.destroy=function(){this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),u.prototype.destroy.call(this)},i.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},i.show=function(){this.top.show(),this.out.show(),this.inn.show(),this.side1.show(),this.side2.show()},i},b.prototype.arc3dPath=function(t){function a(t){return t%=2*Math.PI,t>Math.PI&&(t=2*Math.PI-t),t}var r=t.x,n=t.y,l=t.start,h=t.end-1e-5,c=t.r,p=t.innerR,d=t.depth,x=t.alpha,y=t.beta,f=Math.cos(l),z=Math.sin(l);t=Math.cos(h);var u=Math.sin(h),b=c*Math.cos(y),c=c*Math.cos(x),g=p*Math.cos(y),v=p*Math.cos(x),p=d*Math.sin(y),m=d*Math.sin(x),d=["M",r+b*f,n+c*z],d=d.concat(e(r,n,b,c,l,h,0,0)),d=d.concat(["L",r+g*t,n+v*u]),d=d.concat(e(r,n,g,v,h,l,0,0)),d=d.concat(["Z"]),M=0<y?Math.PI/2:0,y=0<x?0:Math.PI/2,M=l>-M?l:h>-M?-M:l,A=h<s-y?h:l<s-y?s-y:h,P=2*s-y,x=["M",r+b*i(M),n+c*o(M)],x=x.concat(e(r,n,b,c,M,A,0,0));return h>P&&l<P?(x=x.concat(["L",r+b*i(A)+p,n+c*o(A)+m]),x=x.concat(e(r,n,b,c,A,P,p,m)),x=x.concat(["L",r+b*i(P),n+c*o(P)]),x=x.concat(e(r,n,b,c,P,h,0,0)),x=x.concat(["L",r+b*i(h)+p,n+c*o(h)+m]),x=x.concat(e(r,n,b,c,h,P,p,m)),x=x.concat(["L",r+b*i(P),n+c*o(P)]),x=x.concat(e(r,n,b,c,P,A,0,0))):h>s-y&&l<s-y&&(x=x.concat(["L",r+b*Math.cos(A)+p,n+c*Math.sin(A)+m]),x=x.concat(e(r,n,b,c,A,h,p,m)),x=x.concat(["L",r+b*Math.cos(h),n+c*Math.sin(h)]),x=x.concat(e(r,n,b,c,h,A,0,0))),x=x.concat(["L",r+b*Math.cos(A)+p,n+c*Math.sin(A)+m]),x=x.concat(e(r,n,b,c,A,M,p,m)),x=x.concat(["Z"]),y=["M",r+g*f,n+v*z],y=y.concat(e(r,n,g,v,l,h,0,0)),y=y.concat(["L",r+g*Math.cos(h)+p,n+v*Math.sin(h)+m]),y=y.concat(e(r,n,g,v,h,l,p,m)),y=y.concat(["Z"]),f=["M",r+b*f,n+c*z,"L",r+b*f+p,n+c*z+m,"L",r+g*f+p,n+v*z+m,"L",r+g*f,n+v*z,"Z"],r=["M",r+b*t,n+c*u,"L",r+b*t+p,n+c*u+m,"L",r+g*t+p,n+v*u+m,"L",r+g*t,n+v*u,"Z"],u=Math.atan2(m,-p),n=Math.abs(h+u),t=Math.abs(l+u),l=Math.abs((l+h)/2+u),n=a(n),t=a(t),l=a(l),l*=1e5,h=1e5*t,n*=1e5,{top:d,zTop:1e5*Math.PI+1,out:x,zOut:Math.max(l,h,n),inn:y,zInn:Math.max(l,h,n),side1:f,zSide1:.99*n,side2:r,zSide2:.99*h}}}(t),function(t){function e(t,e){var i,s=t.plotLeft,a=t.plotWidth+s,n=t.plotTop,l=t.plotHeight+n,h=s+t.plotWidth/2,c=n+t.plotHeight/2,p=Number.MAX_VALUE,d=-Number.MAX_VALUE,x=Number.MAX_VALUE,y=-Number.MAX_VALUE,f=1;return i=[{x:s,y:n,z:0},{x:s,y:n,z:e}],o([0,1],function(t){i.push({x:a,y:i[t].y,z:i[t].z})}),o([0,1,2,3],function(t){i.push({x:i[t].x,y:l,z:i[t].z})}),i=r(i,t,!1),o(i,function(t){p=Math.min(p,t.x),d=Math.max(d,t.x),x=Math.min(x,t.y),y=Math.max(y,t.y)}),s>p&&(f=Math.min(f,1-Math.abs((s+h)/(p+h))%1)),a<d&&(f=Math.min(f,(a-h)/(d-h))),n>x&&(f=0>x?Math.min(f,(n+c)/(-x+n+c)):Math.min(f,1-(n+c)/(x+c)%1)),l<y&&(f=Math.min(f,Math.abs((l-c)/(y-c)))),f}var i=t.addEvent,s=t.Chart,o=t.each,a=t.merge,r=t.perspective,n=t.pick,l=t.wrap;s.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},s.prototype.propsRequireDirtyBox.push("chart.options3d"),s.prototype.propsRequireUpdateSeries.push("chart.options3d"),i(s,"afterInit",function(){var t=this.options;this.is3d()&&o(t.series,function(e){"scatter"===(e.type||t.chart.type||t.chart.defaultSeriesType)&&(e.type="scatter3d")})}),t.wrap(t.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))});var h=t.getOptions();a(!0,h,{chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:"default",frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}}),i(s,"afterGetContainer",function(){this.renderer.definition({tagName:"style",textContent:".highcharts-3d-top{filter: url(#highcharts-brighter)}\n.highcharts-3d-side{filter: url(#highcharts-darker)}\n"})}),l(s.prototype,"setClassName",function(t){t.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}),i(t.Chart,"afterSetChartSize",function(){var t=this.options.chart.options3d;if(this.is3d()){var i=this.inverted,s=this.clipBox,o=this.margin;s[i?"y":"x"]=-(o[3]||0),s[i?"x":"y"]=-(o[0]||0),s[i?"height":"width"]=this.chartWidth+(o[3]||0)+(o[1]||0),s[i?"width":"height"]=this.chartHeight+(o[0]||0)+(o[2]||0),this.scale3d=1,!0===t.fitToPlot&&(this.scale3d=e(this,t.depth)),this.frame3d=this.get3dFrame()}}),i(s,"beforeRedraw",function(){this.is3d()&&(this.isDirtyBox=!0)}),i(s,"beforeRender",function(){this.is3d()&&(this.frame3d=this.get3dFrame())}),l(s.prototype,"renderSeries",function(t){var e=this.series.length;if(this.is3d())for(;e--;)t=this.series[e],t.translate(),t.render();else t.call(this)}),i(s,"afterDrawChartBox",function(){if(this.is3d()){var e=this.renderer,i=this.options.chart.options3d,s=this.get3dFrame(),o=this.plotLeft,a=this.plotLeft+this.plotWidth,r=this.plotTop,n=this.plotTop+this.plotHeight,i=i.depth,l=o-(s.left.visible?s.left.size:0),h=a+(s.right.visible?s.right.size:0),c=r-(s.top.visible?s.top.size:0),p=n+(s.bottom.visible?s.bottom.size:0),d=0-(s.front.visible?s.front.size:0),x=i+(s.back.visible?s.back.size:0),y=this.hasRendered?"animate":"attr";this.frame3d=s,this.frameShapes||(this.frameShapes={bottom:e.polyhedron().add(),top:e.polyhedron().add(),left:e.polyhedron().add(),right:e.polyhedron().add(),back:e.polyhedron().add(),front:e.polyhedron().add()}),this.frameShapes.bottom[y]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:s.bottom.frontFacing?-1e3:1e3,faces:[{fill:t.color(s.bottom.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:h,y:p,z:d},{x:h,y:p,z:x},{x:l,y:p,z:x}],enabled:s.bottom.visible},{fill:t.color(s.bottom.color).brighten(.1).get(),vertexes:[{x:o,y:n,z:i},{x:a,y:n,z:i},{x:a,y:n,z:0},{x:o,y:n,z:0}],enabled:s.bottom.visible},{fill:t.color(s.bottom.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:d},{x:l,y:p,z:x},{x:o,y:n,z:i},{x:o,y:n,z:0}],enabled:s.bottom.visible&&!s.left.visible},{fill:t.color(s.bottom.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:x},{x:h,y:p,z:d},{x:a,y:n,z:0},{x:a,y:n,z:i}],enabled:s.bottom.visible&&!s.right.visible},{fill:t.color(s.bottom.color).get(),vertexes:[{x:h,y:p,z:d},{x:l,y:p,z:d},{x:o,y:n,z:0},{x:a,y:n,z:0}],enabled:s.bottom.visible&&!s.front.visible},{fill:t.color(s.bottom.color).get(),vertexes:[{x:l,y:p,z:x},{x:h,y:p,z:x},{x:a,y:n,z:i},{x:o,y:n,z:i}],enabled:s.bottom.visible&&!s.back.visible}]}),this.frameShapes.top[y]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:s.top.frontFacing?-1e3:1e3,faces:[{fill:t.color(s.top.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:h,y:c,z:x},{x:h,y:c,z:d},{x:l,y:c,z:d}],enabled:s.top.visible},{fill:t.color(s.top.color).brighten(.1).get(),vertexes:[{x:o,y:r,z:0},{x:a,y:r,z:0},{x:a,y:r,z:i},{x:o,y:r,z:i}],enabled:s.top.visible},{fill:t.color(s.top.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:c,z:d},{x:o,y:r,z:0},{x:o,y:r,z:i}],enabled:s.top.visible&&!s.left.visible},{fill:t.color(s.top.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:c,z:x},{x:a,y:r,z:i},{x:a,y:r,z:0}],enabled:s.top.visible&&!s.right.visible},{fill:t.color(s.top.color).get(),vertexes:[{x:l,y:c,z:d},{x:h,y:c,z:d},{x:a,y:r,z:0},{x:o,y:r,z:0}],enabled:s.top.visible&&!s.front.visible},{fill:t.color(s.top.color).get(),vertexes:[{x:h,y:c,z:x},{x:l,y:c,z:x},{x:o,y:r,z:i},{x:a,y:r,z:i}],enabled:s.top.visible&&!s.back.visible}]}),this.frameShapes.left[y]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:s.left.frontFacing?-1e3:1e3,faces:[{fill:t.color(s.left.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:o,y:n,z:0},{x:o,y:n,z:i},{x:l,y:p,z:x}],enabled:s.left.visible&&!s.bottom.visible},{fill:t.color(s.left.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:o,y:r,z:i},{x:o,y:r,z:0},{x:l,y:c,z:d}],enabled:s.left.visible&&!s.top.visible},{fill:t.color(s.left.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:x},{x:l,y:c,z:x},{x:l,y:c,z:d},{x:l,y:p,z:d}],enabled:s.left.visible},{fill:t.color(s.left.color).brighten(-.1).get(),vertexes:[{x:o,y:r,z:i},{x:o,y:n,z:i},{x:o,y:n,z:0},{x:o,y:r,z:0}],enabled:s.left.visible},{fill:t.color(s.left.color).get(),vertexes:[{x:l,y:p,z:d},{x:l,y:c,z:d},{x:o,y:r,z:0},{x:o,y:n,z:0}],enabled:s.left.visible&&!s.front.visible},{fill:t.color(s.left.color).get(),vertexes:[{x:l,y:c,z:x},{x:l,y:p,z:x},{x:o,y:n,z:i},{x:o,y:r,z:i}],enabled:s.left.visible&&!s.back.visible}]}),this.frameShapes.right[y]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:s.right.frontFacing?-1e3:1e3,faces:[{fill:t.color(s.right.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:x},{x:a,y:n,z:i},{x:a,y:n,z:0},{x:h,y:p,z:d}],enabled:s.right.visible&&!s.bottom.visible},{fill:t.color(s.right.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:d},{x:a,y:r,z:0},{x:a,y:r,z:i},{x:h,y:c,z:x}],enabled:s.right.visible&&!s.top.visible},{fill:t.color(s.right.color).brighten(-.1).get(),vertexes:[{x:a,y:r,z:0},{x:a,y:n,z:0},{x:a,y:n,z:i},{x:a,y:r,z:i}],enabled:s.right.visible},{fill:t.color(s.right.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:d},{x:h,y:c,z:d},{x:h,y:c,z:x},{x:h,y:p,z:x}],enabled:s.right.visible},{fill:t.color(s.right.color).get(),vertexes:[{x:h,y:c,z:d},{x:h,y:p,z:d},{x:a,y:n,z:0},{x:a,y:r,z:0}],enabled:s.right.visible&&!s.front.visible},{fill:t.color(s.right.color).get(),vertexes:[{x:h,y:p,z:x},{x:h,y:c,z:x},{x:a,y:r,z:i},{x:a,y:n,z:i}],enabled:s.right.visible&&!s.back.visible}]}),this.frameShapes.back[y]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:s.back.frontFacing?-1e3:1e3,faces:[{fill:t.color(s.back.color).brighten(.1).get(),vertexes:[{x:h,y:p,z:x},{x:l,y:p,z:x},{x:o,y:n,z:i},{x:a,y:n,z:i}],enabled:s.back.visible&&!s.bottom.visible},{fill:t.color(s.back.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:x},{x:h,y:c,z:x},{x:a,y:r,z:i},{x:o,y:r,z:i}],enabled:s.back.visible&&!s.top.visible},{fill:t.color(s.back.color).brighten(-.1).get(),vertexes:[{x:l,y:p,z:x},{x:l,y:c,z:x},{x:o,y:r,z:i},{x:o,y:n,z:i}],enabled:s.back.visible&&!s.left.visible},{fill:t.color(s.back.color).brighten(-.1).get(),vertexes:[{x:h,y:c,z:x},{x:h,y:p,z:x},{x:a,y:n,z:i},{x:a,y:r,z:i}],enabled:s.back.visible&&!s.right.visible},{fill:t.color(s.back.color).get(),vertexes:[{x:o,y:r,z:i},{x:a,y:r,z:i},{x:a,y:n,z:i},{x:o,y:n,z:i}],enabled:s.back.visible},{fill:t.color(s.back.color).get(),vertexes:[{x:l,y:p,z:x},{x:h,y:p,z:x},{x:h,y:c,z:x},{x:l,y:c,z:x}],enabled:s.back.visible}]}),this.frameShapes.front[y]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:s.front.frontFacing?-1e3:1e3,faces:[{fill:t.color(s.front.color).brighten(.1).get(),vertexes:[{x:l,y:p,z:d},{x:h,y:p,z:d},{x:a,y:n,z:0},{x:o,y:n,z:0}],enabled:s.front.visible&&!s.bottom.visible},{fill:t.color(s.front.color).brighten(.1).get(),vertexes:[{x:h,y:c,z:d},{x:l,y:c,z:d},{x:o,y:r,z:0},{x:a,y:r,z:0}],enabled:s.front.visible&&!s.top.visible},{fill:t.color(s.front.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:p,z:d},{x:o,y:n,z:0},{x:o,y:r,z:0}],enabled:s.front.visible&&!s.left.visible},{fill:t.color(s.front.color).brighten(-.1).get(),vertexes:[{x:h,y:p,z:d},{x:h,y:c,z:d},{x:a,y:r,z:0},{x:a,y:n,z:0}],enabled:s.front.visible&&!s.right.visible},{fill:t.color(s.front.color).get(),vertexes:[{x:a,y:r,z:0},{x:o,y:r,z:0},{x:o,y:n,z:0},{x:a,y:n,z:0}],enabled:s.front.visible},{fill:t.color(s.front.color).get(),vertexes:[{x:h,y:p,z:d},{x:l,y:p,z:d},{x:l,y:c,z:d},{x:h,y:c,z:d}],enabled:s.front.visible}]})}}),s.prototype.retrieveStacks=function(t){var e,i=this.series,s={},a=1;return o(this.series,function(o){e=n(o.options.stack,t?0:i.length-1-o.index),s[e]?s[e].series.push(o):(s[e]={series:[o],position:a},a++)}),s.totalStacks=a+1,s},s.prototype.get3dFrame=function(){var e=this,i=e.options.chart.options3d,s=i.frame,a=e.plotLeft,l=e.plotLeft+e.plotWidth,h=e.plotTop,c=e.plotTop+e.plotHeight,p=i.depth,d=function(i){return i=t.shapeArea3d(i,e),.5<i?1:-.5>i?-1:0},x=d([{x:a,y:c,z:p},{x:l,y:c,z:p},{x:l,y:c,z:0},{x:a,y:c,z:0}]),y=d([{x:a,y:h,z:0},{x:l,y:h,z:0},{x:l,y:h,z:p},{x:a,y:h,z:p}]),f=d([{x:a,y:h,z:0},{x:a,y:h,z:p},{x:a,y:c,z:p},{x:a,y:c,z:0}]),z=d([{x:l,y:h,z:p},{x:l,y:h,z:0},{x:l,y:c,z:0},{x:l,y:c,z:p}]),u=d([{x:a,y:c,z:0},{x:l,y:c,z:0},{x:l,y:h,z:0},{x:a,y:h,z:0}]),d=d([{x:a,y:h,z:p},{x:l,y:h,z:p},{x:l,y:c,z:p},{x:a,y:c,z:p}]),b=!1,g=!1,v=!1,m=!1;o([].concat(e.xAxis,e.yAxis,e.zAxis),function(t){t&&(t.horiz?t.opposite?g=!0:b=!0:t.opposite?m=!0:v=!0)});var M=function(t,e,i){for(var s=["size","color","visible"],o={},a=0;a<s.length;a++)for(var r=s[a],l=0;l<t.length;l++)if("object"==typeof t[l]){var h=t[l][r];if(void 0!==h&&null!==h){o[r]=h;break}}return t=i,!0===o.visible||!1===o.visible?t=o.visible:"auto"===o.visible&&(t=0<e),{size:n(o.size,1),color:n(o.color,"none"),frontFacing:0<e,visible:t}},s={bottom:M([s.bottom,s.top,s],x,b),top:M([s.top,s.bottom,s],y,g),left:M([s.left,s.right,s.side,s],f,v),right:M([s.right,s.left,s.side,s],z,m),back:M([s.back,s.front,s],d,!0),front:M([s.front,s.back,s],u,!1)};return"auto"===i.axisLabelPosition?(z=function(t,e){return t.visible!==e.visible||t.visible&&e.visible&&t.frontFacing!==e.frontFacing},i=[],z(s.left,s.front)&&i.push({y:(h+c)/2,x:a,z:0,xDir:{x:1,y:0,z:0}}),z(s.left,s.back)&&i.push({y:(h+c)/2,x:a,z:p,xDir:{x:0,y:0,z:-1}}),z(s.right,s.front)&&i.push({y:(h+c)/2,x:l,z:0,xDir:{x:0,y:0,z:1}}),z(s.right,s.back)&&i.push({y:(h+c)/2,x:l,z:p,xDir:{x:-1,y:0,z:0}}),x=[],z(s.bottom,s.front)&&x.push({x:(a+l)/2,y:c,z:0,xDir:{x:1,y:0,z:0}}),z(s.bottom,s.back)&&x.push({x:(a+l)/2,y:c,z:p,xDir:{x:-1,y:0,z:0}}),y=[],z(s.top,s.front)&&y.push({x:(a+l)/2,y:h,z:0,xDir:{x:1,y:0,z:0}}),z(s.top,s.back)&&y.push({x:(a+l)/2,y:h,z:p,xDir:{x:-1,y:0,z:0}}),f=[],z(s.bottom,s.left)&&f.push({z:(0+p)/2,y:c,x:a,xDir:{x:0,y:0,z:-1}}),z(s.bottom,s.right)&&f.push({z:(0+p)/2,y:c,x:l,xDir:{x:0,y:0,z:1}}),c=[],z(s.top,s.left)&&c.push({z:(0+p)/2,y:h,x:a,xDir:{x:0,y:0,z:-1}}),z(s.top,s.right)&&c.push({z:(0+p)/2,y:h,x:l,xDir:{x:0,y:0,z:1}}),a=function(t,i,s){if(0===t.length)return null;if(1===t.length)return t[0];for(var o=0,a=r(t,e,!1),n=1;n<a.length;n++)s*a[n][i]>s*a[o][i]?o=n:s*a[n][i]===s*a[o][i]&&a[n].z<a[o].z&&(o=n);return t[o]},s.axes={y:{left:a(i,"x",-1),right:a(i,"x",1)},x:{top:a(y,"y",-1),bottom:a(x,"y",1)},z:{top:a(c,"y",-1),bottom:a(f,"y",1)}}):s.axes={y:{left:{x:a,z:0,xDir:{x:1,y:0,z:0}},right:{x:l,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:h,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:c,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:v?l:a,y:h,xDir:v?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:v?l:a,y:c,xDir:v?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}},s},t.Fx.prototype.matrixSetter=function(){var e;if(1>this.pos&&(t.isArray(this.start)||t.isArray(this.end))){var i=this.start||[1,0,0,1,0,0],s=this.end||[1,0,0,1,0,0];e=[];for(var o=0;6>o;o++)e.push(this.pos*s[o]+(1-this.pos)*i[o])}else e=this.end;this.elem.attr(this.prop,e,null,!0)}}(t),function(t){function e(t,e,i){if(!t.chart.is3d()||"colorAxis"===t.coll)return e;var s=t.chart,o=r*s.options.chart.options3d.alpha,a=r*s.options.chart.options3d.beta,n=p(i&&t.options.title.position3d,t.options.labels.position3d);i=p(i&&t.options.title.skew3d,t.options.labels.skew3d);var l=s.frame3d,h=s.plotLeft,x=s.plotWidth+h,y=s.plotTop,f=s.plotHeight+y,s=!1,z=0,u=0,b={x:0,y:1,z:0};if(e=t.swapZ({x:e.x,y:e.y,z:0}),t.isZAxis)if(t.opposite){if(null===l.axes.z.top)return{};u=e.y-y,e.x=l.axes.z.top.x,e.y=l.axes.z.top.y,h=l.axes.z.top.xDir,s=!l.top.frontFacing}else{if(null===l.axes.z.bottom)return{};u=e.y-f,e.x=l.axes.z.bottom.x,e.y=l.axes.z.bottom.y,h=l.axes.z.bottom.xDir,s=!l.bottom.frontFacing}else if(t.horiz)if(t.opposite){if(null===l.axes.x.top)return{};u=e.y-y,e.y=l.axes.x.top.y,e.z=l.axes.x.top.z,h=l.axes.x.top.xDir,s=!l.top.frontFacing}else{if(null===l.axes.x.bottom)return{};u=e.y-f,e.y=l.axes.x.bottom.y,e.z=l.axes.x.bottom.z,h=l.axes.x.bottom.xDir,s=!l.bottom.frontFacing}else if(t.opposite){if(null===l.axes.y.right)return{};z=e.x-x,e.x=l.axes.y.right.x,e.z=l.axes.y.right.z,h=l.axes.y.right.xDir,h={x:h.z,y:h.y,z:-h.x}}else{if(null===l.axes.y.left)return{};z=e.x-h,e.x=l.axes.y.left.x,e.z=l.axes.y.left.z,h=l.axes.y.left.xDir}return"chart"!==n&&("flap"===n?t.horiz?(a=Math.sin(o),o=Math.cos(o),t.opposite&&(a=-a),s&&(a=-a),b={x:h.z*a,y:o,z:-h.x*a}):h={x:Math.cos(a),y:0,z:Math.sin(a)}:"ortho"===n?t.horiz?(b=Math.cos(o),n=Math.sin(a)*b,o=-Math.sin(o),a=-b*Math.cos(a),b={x:h.y*a-h.z*o,y:h.z*n-h.x*a,z:h.x*o-h.y*n},o=1/Math.sqrt(b.x*b.x+b.y*b.y+b.z*b.z),s&&(o=-o),b={x:o*b.x,y:o*b.y,z:o*b.z}):h={x:Math.cos(a),y:0,z:Math.sin(a)}:t.horiz?b={x:Math.sin(a)*Math.sin(o),y:Math.cos(o),z:-Math.cos(a)*Math.sin(o)}:h={x:Math.cos(a),y:0,z:Math.sin(a)}),e.x+=z*h.x+u*b.x,e.y+=z*h.y+u*b.y,e.z+=z*h.z+u*b.z,s=c([e],t.chart)[0],i?(0>d(c([e,{x:e.x+h.x,y:e.y+h.y,z:e.z+h.z},{x:e.x+b.x,y:e.y+b.y,z:e.z+b.z}],t.chart))&&(h={x:-h.x,y:-h.y,z:-h.z}),t=c([{x:e.x,y:e.y,z:e.z},{x:e.x+h.x,y:e.y+h.y,z:e.z+h.z},{x:e.x+b.x,y:e.y+b.y,z:e.z+b.z}],t.chart),s.matrix=[t[1].x-t[0].x,t[1].y-t[0].y,t[2].x-t[0].x,t[2].y-t[0].y,s.x,s.y],s.matrix[4]-=s.x*s.matrix[0]+s.y*s.matrix[2],s.matrix[5]-=s.x*s.matrix[1]+s.y*s.matrix[3]):s.matrix=null,s}var i,s=t.addEvent,o=t.Axis,a=t.Chart,r=t.deg2rad,n=t.each,l=t.extend,h=t.merge,c=t.perspective,p=t.pick,d=t.shapeArea,x=t.splat,y=t.Tick,f=t.wrap;h(!0,o.prototype.defaultOptions,{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}),s(o,"afterSetOptions",function(){var t;this.chart.is3d&&this.chart.is3d()&&"colorAxis"!==this.coll&&(t=this.options,t.tickWidth=p(t.tickWidth,0),t.gridLineWidth=p(t.gridLineWidth,1))}),f(o.prototype,"getPlotLinePath",function(t){var e=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()||"colorAxis"===this.coll||null===e)return e;var i=this.chart,s=i.options.chart.options3d,s=this.isZAxis?i.plotWidth:s.depth,i=i.frame3d,e=[this.swapZ({x:e[1],y:e[2],z:0}),this.swapZ({x:e[1],y:e[2],z:s}),this.swapZ({x:e[4],y:e[5],z:0}),this.swapZ({x:e[4],y:e[5],z:s})],s=[];return this.horiz?(this.isZAxis?(i.left.visible&&s.push(e[0],e[2]),i.right.visible&&s.push(e[1],e[3])):(i.front.visible&&s.push(e[0],e[2]),i.back.visible&&s.push(e[1],e[3])),i.top.visible&&s.push(e[0],e[1]),i.bottom.visible&&s.push(e[2],e[3])):(i.front.visible&&s.push(e[0],e[2]),i.back.visible&&s.push(e[1],e[3]),i.left.visible&&s.push(e[0],e[1]),i.right.visible&&s.push(e[2],e[3])),s=c(s,this.chart,!1),this.chart.renderer.toLineSegments(s)}),f(o.prototype,"getLinePath",function(t){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:t.apply(this,[].slice.call(arguments,1))}),f(o.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d()||"colorAxis"===this.coll)return t.apply(this,[].slice.call(arguments,1));var e=arguments,i=e[2],s=[],e=this.getPlotLinePath(e[1]),i=this.getPlotLinePath(i);if(e&&i)for(var o=0;o<e.length;o+=6)s.push("M",e[o+1],e[o+2],"L",e[o+4],e[o+5],"L",i[o+4],i[o+5],"L",i[o+1],i[o+2],"Z");return s}),f(y.prototype,"getMarkPath",function(t){var i=t.apply(this,[].slice.call(arguments,1)),i=[e(this.axis,{x:i[1],y:i[2],z:0}),e(this.axis,{x:i[4],y:i[5],z:0})];return this.axis.chart.renderer.toLineSegments(i)}),s(y,"afterGetLabelPosition",function(t){l(t.pos,e(this.axis,t.pos))}),f(o.prototype,"getTitlePosition",function(t){var i=t.apply(this,[].slice.call(arguments,1));return e(this,i,!0)}),s(o,"drawCrosshair",function(t){this.chart.is3d()&&"colorAxis"!==this.coll&&t.point&&(t.point.crosshairPos=this.isXAxis?t.point.plotXold||t.point.plotX:this.len-(t.point.plotYold||t.point.plotY))}),s(o,"destroy",function(){n(["backFrame","bottomFrame","sideFrame"],function(t){this[t]&&(this[t]=this[t].destroy())},this)}),o.prototype.swapZ=function(t,e){return this.isZAxis?(e=e?0:this.chart.plotLeft,{x:e+t.z,y:t.y,z:t.x-e}):t},i=t.ZAxis=function(){this.init.apply(this,arguments)},l(i.prototype,o.prototype),l(i.prototype,{isZAxis:!0,setOptions:function(t){t=h({offset:0,lineWidth:0},t),o.prototype.setOptions.call(this,t),this.coll="zAxis"},setAxisSize:function(){o.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),n(t.series,function(i){!i.visible&&e.options.chart.ignoreHiddenSeries||(t.hasVisibleSeries=!0,i=i.zData,i.length&&(t.dataMin=Math.min(p(t.dataMin,i[0]),Math.min.apply(null,i)),t.dataMax=Math.max(p(t.dataMax,i[0]),Math.max.apply(null,i))))})}}),s(a,"afterGetAxes",function(){var t=this,e=this.options,e=e.zAxis=x(e.zAxis||{});t.is3d()&&(this.zAxis=[],n(e,function(e,s){e.index=s,e.isX=!0,new i(t,e).setScale()}))})}(t),function(t){var e=t.addEvent,i=t.perspective,s=t.pick;e(t.Series,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),t.Series.prototype.translate3dPoints=function(){var t,e,o,a=this.chart,r=s(this.zAxis,a.options.zAxis[0]),n=[];for(o=0;o<this.data.length;o++)t=this.data[o],r&&r.translate?(e=r.isLog&&r.val2lin?r.val2lin(t.z):t.z,t.plotZ=r.translate(e),t.isInside=!!t.isInside&&(e>=r.min&&e<=r.max)):t.plotZ=0,n.push({x:s(t.plotXold,t.plotX),y:s(t.plotYold,t.plotY),z:s(t.plotZold,t.plotZ)});for(a=i(n,a,!0),o=0;o<this.data.length;o++)t=this.data[o],r=a[o],t.plotXold=t.plotX,t.plotYold=t.plotY,t.plotZold=t.plotZ,t.plotX=r.x,t.plotY=r.y,t.plotZ=r.z}}(t),function(t){var e=t.addEvent,i=t.each,s=t.perspective,o=t.pick,a=t.Series,r=t.seriesTypes,n=t.inArray,l=t.svg,h=t.wrap;h(r.column.prototype,"translate",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),h(t.Series.prototype,"alignDataLabel",function(t){arguments[3].outside3dPlot=arguments[1].outside3dPlot,t.apply(this,[].slice.call(arguments,1))}),h(t.Series.prototype,"justifyDataLabel",function(t){return!arguments[2].outside3dPlot&&t.apply(this,[].slice.call(arguments,1))}),r.column.prototype.translate3dPoints=function(){},r.column.prototype.translate3dShapes=function(){var t=this,e=t.chart,o=t.options,a=o.depth||25,r=(o.stacking?o.stack||0:t.index)*(a+(o.groupZPadding||1)),n=t.borderWidth%2?.5:0;e.inverted&&!t.yAxis.reversed&&(n*=-1),!1!==o.grouping&&(r=0),r+=o.groupZPadding||1,i(t.data,function(o){if(o.outside3dPlot=null,null!==o.y){var l,h=o.shapeArgs,c=o.tooltipPos;i([["x","width"],["y","height"]],function(e){if(l=h[e[0]]-n,0>l&&(h[e[1]]+=h[e[0]]+n,h[e[0]]=-n,l=0),l+h[e[1]]>t[e[0]+"Axis"].len&&0!==h[e[1]]&&(h[e[1]]=t[e[0]+"Axis"].len-h[e[0]]),0!==h[e[1]]&&(h[e[0]]>=t[e[0]+"Axis"].len||h[e[0]]+h[e[1]]<=n)){for(var i in h)h[i]=0;o.outside3dPlot=!0}}),o.shapeType="cuboid",h.z=r,h.depth=a,h.insidePlotArea=!0,c=s([{x:c[0],y:c[1],z:r}],e,!0)[0],o.tooltipPos=[c.x,c.y]}}),t.z=r},h(r.column.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments[1],s=this.yAxis,o=this,a=this.yAxis.reversed;l&&(e?i(o.data,function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,a||(t.shapeArgs.y=t.stackY?t.plotY+s.translate(t.stackY):t.plotY+(t.negative?-t.height:t.height)))}):(i(o.data,function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,o.options.animation))}),this.drawDataLabels(),o.animate=null))}else t.apply(this,[].slice.call(arguments,1))}),h(r.column.prototype,"plotGroup",function(t,e,i,s,o,a){return this.chart.is3d()&&a&&!this[e]&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(a)),this[e]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[e].survive=!0),t.apply(this,Array.prototype.slice.call(arguments,1));
}),h(r.column.prototype,"setVisible",function(t,e){var s,o=this;o.chart.is3d()&&i(o.data,function(t){s=(t.visible=t.options.visible=e=void 0===e?!t.visible:e)?"visible":"hidden",o.options.data[n(t,o.data)]=t.options,t.graphic&&t.graphic.attr({visibility:s})}),t.apply(this,Array.prototype.slice.call(arguments,1))}),r.column.prototype.handle3dGrouping=!0,e(a,"afterInit",function(){if(this.chart.is3d()&&this.handle3dGrouping){var t=this.options,e=t.grouping,i=t.stacking,s=o(this.yAxis.options.reversedStacks,!0),a=0;if(void 0===e||e){for(e=this.chart.retrieveStacks(i),a=t.stack||0,i=0;i<e[a].series.length&&e[a].series[i]!==this;i++);a=10*(e.totalStacks-e[a].position)+(s?i:-i),this.xAxis.reversed||(a=10*e.totalStacks-a)}t.zIndex=a}}),h(a.prototype,"alignDataLabel",function(t){if(this.chart.is3d()&&("column"===this.type||"columnrange"===this.type)){var e=arguments,i=e[4],e=e[1],o={x:i.x,y:i.y,z:this.z},o=s([o],this.chart,!0)[0];i.x=o.x,i.y=e.outside3dPlot?-9e9:o.y}t.apply(this,[].slice.call(arguments,1))}),h(t.StackItem.prototype,"getStackBox",function(e,i){var s=e.apply(this,[].slice.call(arguments,1));if(i.is3d()){var o={x:s.x,y:s.y,z:0},o=t.perspective([o],i,!0)[0];s.x=o.x,s.y=o.y}return s})}(t),function(t){var e=t.deg2rad,i=t.each,s=t.seriesTypes,o=t.svg;t=t.wrap,t(s.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var s=this,o=s.options,a=o.depth||0,r=s.chart.options.chart.options3d,n=r.alpha,l=r.beta,h=o.stacking?(o.stack||0)*a:s._i*a,h=h+a/2;!1!==o.grouping&&(h=0),i(s.data,function(t){var i=t.shapeArgs;t.shapeType="arc3d",i.z=h,i.depth=.75*a,i.alpha=n,i.beta=l,i.center=s.center,i=(i.end+i.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(i)*o.slicedOffset*Math.cos(n*e)),translateY:Math.round(Math.sin(i)*o.slicedOffset*Math.cos(n*e))}})}}),t(s.pie.prototype.pointClass.prototype,"haloPath",function(t){var e=arguments;return this.series.chart.is3d()?[]:t.call(this,e[1])}),t(s.pie.prototype,"drawPoints",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&i(this.points,function(t){var e=t.graphic;e&&e[t.y&&t.visible?"show":"hide"]()})}),t(s.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var s=this.chart.options.chart.options3d;i(this.data,function(t){var o=t.shapeArgs,a=o.r,r=(o.start+o.end)/2,n=t.labelPos,l=-a*(1-Math.cos((o.alpha||s.alpha)*e))*Math.sin(r),h=a*(Math.cos((o.beta||s.beta)*e)-1)*Math.cos(r);i([0,2,4],function(t){n[t]+=h,n[t+1]+=l})})}t.apply(this,[].slice.call(arguments,1))}),t(s.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),t(s.pie.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments[1],i=this.options.animation,s=this.center,a=this.group,r=this.markerGroup;o&&(!0===i&&(i={}),e?(a.oldtranslateX=a.translateX,a.oldtranslateY=a.translateY,e={translateX:s[0],translateY:s[1],scaleX:.001,scaleY:.001},a.attr(e),r&&(r.attrSetters=a.attrSetters,r.attr(e))):(e={translateX:a.oldtranslateX,translateY:a.oldtranslateY,scaleX:1,scaleY:1},a.animate(e,i),r&&r.animate(e,i),this.animate=null))}else t.apply(this,[].slice.call(arguments,1))})}(t),function(t){var e=t.Point,i=t.seriesType,s=t.seriesTypes;i("scatter3d","scatter",{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}},{pointAttribs:function(e){var i=s.scatter.prototype.pointAttribs.apply(this,arguments);return this.chart.is3d()&&e&&(i.zIndex=t.pointCameraDistance(e,this.chart)),i},axisTypes:["xAxis","yAxis","zAxis"],pointArrayMap:["x","y","z"],parallelArrays:["x","y","z"],directTouch:!0},{applyOptions:function(){return e.prototype.applyOptions.apply(this,arguments),void 0===this.z&&(this.z=0),this}})}(t)});